<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ball Tracking</title>
    <link rel="stylesheet" href="static/styles.css"> <!-- Link to your CSS file -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

<div class="title-section">
    <h1>Ball Tracking</h1>
    <h2>Select a Camera and Action</h2>
</div>

<div class="camera-selection">
    <div class="camera-group">
        <h3>Camera Selection</h3>
        <!-- 10 buttons for camera selection -->
        {% for i in available_cameras %}
            <button onclick="selectCamera({{ i }})">Camera {{ i }}</button>
        {% endfor %}
    </div>
    
    <div class="camera-group">
        <h3>Action Selection</h3>
        <!-- 6 buttons for action selection -->
        {% for j in range(1, 8) %}
            <button onclick="selectAction({{ j }})">Action {{ j }}</button>
        {% endfor %}
    </div>
</div>

<button id="load_video" onclick="loadVideo()">Load Video</button>

<h2>Tracking Video</h2>
<div class="video-container">
    <video id="tracking-video" controls style="width: 800px; height: auto;">
        <source id="video-source" src="" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</div>

<script>
    // Variables to store selected camera and action
    let selectedCamera = 1; // Default camera
    let selectedAction = 1; // Default action

    function selectCamera(camera) {
        selectedCamera = camera;
        console.log("Selected Camera:", selectedCamera);
    }

    function selectAction(action) {
        selectedAction = action;
        console.log("Selected Action:", selectedAction);
    }

    function loadVideo() {
        const videoElement = document.getElementById('tracking-video');
        const sourceElement = document.getElementById('video-source');

        // Fetch the video URL using AJAX
        $.getJSON('/get_ball_tracking_video', { camera: selectedCamera, action: selectedAction })
            .done(function(data) {
                // Set the video source
                sourceElement.src = data.video_src;
                // Load the video
                videoElement.load();
                videoElement.play();
            })
            .fail(function() {
                alert("Failed to load tracking video");
            });
    }
</script>

</body>
</html>
